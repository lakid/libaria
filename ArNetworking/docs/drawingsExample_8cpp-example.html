<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ArNetworking: drawingsExample.cpp</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ArNetworking
   &#160;<span id="projectnumber">dev20141110</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('drawingsExample_8cpp-example.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">drawingsExample.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example showing how to draw custom graphics in clients such as MobileEyes This is an example server that shows how to draw arbitrary figures in a client (e.g. MobileEyes) via <a class="el" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a>. It draws some lines, "arrows", and moving dots with various sizes and colors. You can use these drawings for debugging or visualization, for example, to represent sensor readings. In fact, specific support for <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html">ArRobot</a>, <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSick.html">ArSick</a>, <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSonarDevice.html">ArSonarDevice</a>, <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArIRs.html">ArIRs</a> and <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBumpers.html">ArBumpers</a> are built in to <a class="el" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a>: see <a class="el" href="drawingsExampleWithRobot_8cpp.html">drawingsExampleWithRobot.cpp</a> or <a class="el" href="serverDemo_8cpp.html">serverDemo.cpp</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="drawingsExampleWithRobot_8cpp.html">drawingsExampleWithRobot.cpp</a></dd></dl>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &quot;Aria.h&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="ArNetworking_8h.html">ArNetworking.h</a>&quot;</span>
<span class="preprocessor">#include &lt;math.h&gt;</span>


<span class="comment">/* These are some callbacks that respond to client requests for the drawings&#39; </span>
<span class="comment"> * geometry data. */</span>
<span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>(<a name="_a1"></a><a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a name="a2"></a><a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a name="_a3"></a><a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a4"></a><a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a6"></a><a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);


<span class="comment">/* This class shows how to encapsulate the various aspects of a drawing into one</span>
<span class="comment"> * object that other parts of the program can easily access in a more general</span>
<span class="comment"> * (and thread-safe) way. It lets you change position, radius, resolution</span>
<span class="comment"> * (number of dots), and dot drawing properties.</span>
<span class="comment"> * The default radius is 1 meter and the default number of points is 360.</span>
<span class="comment"> *</span>
<span class="comment"> * In this example program, the radius is updated periodically by a loop in the</span>
<span class="comment"> * main thread (see main() function), while ArNetworking requests are handled</span>
<span class="comment"> * in the separate ArNetworking server thread, calling drawingServerCB() callback (this is </span>
<span class="comment"> * registered with the server when we register the drawing with the</span>
<span class="comment"> * ArServerInfoDrawings object).  So note the use of an ArMutex object to</span>
<span class="comment"> * control this asyrchronous access to the reply packet.</span>
<span class="comment"> */</span>
<span class="keyword">class </span><a name="_a7"></a><a class="code" href="classCircle.html">Circle</a>
{
<span class="keyword">private</span>:
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> myReply;
  <a name="_a8"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMutex.html">ArMutex</a> myMutex; <span class="comment">// mutex around myReply</span>
  <a name="_a9"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArPose.html">ArPose</a> myPos;
  <span class="keywordtype">double</span> myRadius;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myNumPoints;
  <span class="keywordtype">void</span> drawingServerCB(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a> *<a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> *pkt);
  <a name="_a10"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArFunctor2C.html">ArFunctor2C&lt;Circle, ArServerClient*, ArNetPacket*&gt;</a> callback;
  <span class="keywordtype">void</span> regenerate();
<span class="keyword">public</span>:
  <a name="a11"></a><a class="code" href="classCircle.html#a02dd4e6afe1df5a16b1f3ee2ae5b8051">Circle</a>(<a name="_a12"></a><a class="code" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a> *drawingsServer, <span class="keyword">const</span> std::string&amp; name, <a name="_a13"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a> *drawData);
  <a name="a14"></a><a class="code" href="classCircle.html#ae3f30436e645d73e368e8ee55f8d1650">~Circle</a>();

  <span class="keywordtype">void</span> <a name="a15"></a><a class="code" href="classCircle.html#a82bb144f4d47fec91a79a946bcbb4831">setPos</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArPose.html">ArPose</a>&amp; p) 
  {
    myPos = p;
    regenerate();
  }

  <span class="keywordtype">void</span> <a name="a16"></a><a class="code" href="classCircle.html#a6c5164e476c4dc5133e8a1615a0a8d75">setRadius</a>(<span class="keywordtype">double</span> r)
  {
    myRadius = r;
    regenerate();
  }

  <span class="keywordtype">void</span> <a name="a17"></a><a class="code" href="classCircle.html#a36fd9cf27d46824f293088fd0545fa91">setNumPoints</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r)
  {
    myNumPoints = r;
    regenerate();
  }

};

<a class="code" href="classCircle.html#a02dd4e6afe1df5a16b1f3ee2ae5b8051">Circle::Circle</a>(<a class="code" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a> *drawingsServer, <span class="keyword">const</span> std::string&amp; name, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>* drawData) :
  myRadius(1000.0),
  myNumPoints(360),
  callback(this, &amp;<a class="code" href="classCircle.html">Circle</a>::drawingServerCB)
{
  drawingsServer-&gt;<a name="a18"></a><a class="code" href="classArServerInfoDrawings.html#a593c3d93e722ab316ab6404c7f734011" title="Adds a shape to the set of figures.">addDrawing</a>(drawData, name.c_str(), &amp;callback);
}

<a class="code" href="classCircle.html#ae3f30436e645d73e368e8ee55f8d1650">Circle::~Circle</a>() 
{
  <span class="comment">// TODO remove drawing from the server, but not implemented yet</span>
}

<span class="keywordtype">void</span> Circle::drawingServerCB(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a> *<a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> *pkt)
{
  myMutex.<a name="a19"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMutex.html#a7b6aee74872c19fb8829d96dc3e52f34">lock</a>();
  client-&gt;<a name="a20"></a><a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;myReply);
  myMutex.<a name="a21"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMutex.html#afb51b5514a9456f23441e479fe58fb46">unlock</a>();
}

<span class="comment">// Method called by accessor methods when properties changed. This reconstructs</span>
<span class="comment">// the myReply packet sent in response to requests from clients</span>
<span class="keywordtype">void</span> Circle::regenerate()
{
  myMutex.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMutex.html#a7b6aee74872c19fb8829d96dc3e52f34">lock</a>();
  myReply.<a name="a22"></a><a class="code" href="classArNetPacket.html#a967d1901ff4e9cc53e31383eaa3bb609">empty</a>();
  myReply.<a name="a23"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(myNumPoints);
  <span class="keywordtype">double</span> a = 360.0/myNumPoints;
  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; myNumPoints; ++i)
  {
    myReply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(<a name="a24"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMath.html#a5cc85672a327b96f1668aaf8efc58c7a">ArMath::roundInt</a>(myPos.<a name="a25"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArPose.html#afd85bde3b0320d19d108b172c3f332b1">getX</a>()+<a name="a26"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMath.html#a953ffdd0b569b33cbfd5a8f69cf3c69a">ArMath::cos</a>(i*a)*myRadius)); <span class="comment">// X</span>
    myReply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMath.html#a5cc85672a327b96f1668aaf8efc58c7a">ArMath::roundInt</a>(myPos.<a name="a27"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArPose.html#a563e9580f307fe832a7269f72bfda8fb">getY</a>()+<a name="a28"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMath.html#aeb05754b7747988dd97a961eaded6830">ArMath::sin</a>(i*a)*myRadius)); <span class="comment">// Y</span>
  }
  myMutex.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArMutex.html#afb51b5514a9456f23441e479fe58fb46">unlock</a>();
}


<span class="keywordtype">int</span> <a name="a29"></a><a class="code" href="clientCommandLister_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
{
  <a name="a30"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#ad99c16b5d947229d9f8e1c5b2d4cdd73">Aria::init</a>();
  <a name="_a31"></a><a class="code" href="classArServerBase.html" title="Base server for all networking services.">ArServerBase</a> server;

  <a name="_a32"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArArgumentParser.html">ArArgumentParser</a> parser(&amp;argc, argv);
  <a name="_a33"></a><a class="code" href="classArServerSimpleOpener.html" title="Set up and open an ArNetworking server.">ArServerSimpleOpener</a> simpleOpener(&amp;parser);

  <span class="comment">// parse the command line... fail and print the help if the parsing fails</span>
  <span class="comment">// or if help was requested</span>
  parser.loadDefaultArguments();
  <span class="keywordflow">if</span> (!simpleOpener.parseArgs() || !parser.checkHelpAndWarnUnparsed())
  {    
    simpleOpener.logOptions();
    exit(1);
  }


  <span class="comment">// first open the server up</span>
  <span class="keywordflow">if</span> (!simpleOpener.open(&amp;server))
  {
    <span class="keywordflow">if</span> (simpleOpener.wasUserFileBad())
      printf(<span class="stringliteral">&quot;Error: Bad user/password/permissions file.\n&quot;</span>);
    <span class="keywordflow">else</span>
      printf(<span class="stringliteral">&quot;Error: Could not open server port. Use -help to see options.\n&quot;</span>);
    exit(1);
  }


  <span class="comment">// This is the service that provides drawing data to the client.</span>
  <a class="code" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a> drawings(&amp;server);

  <span class="comment">// Add our custom drawings</span>
  drawings.addDrawing(
      <span class="comment">//                shape:      color:               size:   layer:</span>
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyLine&quot;</span>, <a name="_a34"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(255, 0, 0),  2,      49),
      <span class="stringliteral">&quot;exampleDrawing_Home&quot;</span>, 
      <span class="keyword">new</span> <a name="_a35"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>)
  );
  drawings.addDrawing(                                    
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyDots&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(0, 255, 0), 250, 48),
      <span class="stringliteral">&quot;exampleDrawing_Dots&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>)
  );
  drawings.addDrawing(
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polySegments&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(0, 0, 0), 4, 52),
      <span class="stringliteral">&quot;exampleDrawing_XMarksTheSpot&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>)
  );
  drawings.addDrawing(
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyArrows&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(255, 0, 255), 500, 100),
      <span class="stringliteral">&quot;exampleDrawing_Arrows&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>)
  );

  <a class="code" href="classCircle.html">Circle</a> circle(&amp;drawings, <span class="stringliteral">&quot;exampleDrawing_circle&quot;</span>, 
    <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polySegments&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(255, 150, 0), 3, 120));
  circle.setPos(<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArPose.html">ArPose</a>(0, -5000));
  circle.setRadius(1000);
  circle.setNumPoints(360);

  <span class="comment">// log whatever we wanted to before the runAsync</span>
  simpleOpener.checkAndLog();

  <span class="comment">// run the server thread in the background</span>
  server.<a name="a36"></a><a class="code" href="classArServerBase.html#a93c742ddc58a8f035a0d1b9c1fae4599" title="Runs the server in its own thread.">runAsync</a>();

  printf(<span class="stringliteral">&quot;Server is now running...\n&quot;</span>);


  <span class="comment">// Add a key handler mostly that windows can exit by pressing</span>
  <span class="comment">// escape, note that the key handler prevents you from running this program</span>
  <span class="comment">// in the background on Linux.</span>
  <a name="_a37"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArKeyHandler.html">ArKeyHandler</a> *keyHandler;
  <span class="keywordflow">if</span> ((keyHandler = <a name="a38"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a5b8042b38b19d6a5d3cfbed4df483e67">Aria::getKeyHandler</a>()) == NULL)
  {
    keyHandler = <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArKeyHandler.html">ArKeyHandler</a>;
    <a name="a39"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a9e5496a4ec2c379c8e18706922b57cc1">Aria::setKeyHandler</a>(keyHandler);
    printf(<span class="stringliteral">&quot;To exit, press escape.\n&quot;</span>);
  }

 
  <span class="keywordtype">double</span> circleRadius = 1000;
  <span class="keywordflow">while</span>(<span class="keyword">true</span>) 
  {
    <a name="a40"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArUtil.html#a4dfb878a3f9123b8dd96ae05b2fd94cb">ArUtil::sleep</a>(100);
    circleRadius += 50;
    <span class="keywordflow">if</span>(circleRadius &gt; 5000)
      circleRadius = 0;
    circle.setRadius(circleRadius);
  }

  <a name="a41"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a184602a2b3799d61569ec55dd9508450">Aria::shutdown</a>();
  exit(0);  
}




<span class="comment">// Network callbacks for drawings&#39; current geometry data:</span>

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="comment">// 7 Vertices</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(7);

  <span class="comment">// Centered on 0,0.</span>
  <span class="comment">// X:                    Y:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  <span class="comment">// Vertex 2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  <span class="comment">// Vertex 3</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 4</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(0);     reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(1000);  <span class="comment">// Vertex 5</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 6</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 7</span>

  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tik = <a name="a42"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArUtil.html#ad3496dfd2693d19553a399883a4e20e1">ArUtil::getTime</a>() % 200;
  <span class="keywordtype">double</span> t = tik / 5.0;

  <span class="comment">// Three dots</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3);

  <span class="comment">// Dot 1:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3000);  <span class="comment">// X coordinate (mm)</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t) * 1000));<span class="comment">// Y</span>

  <span class="comment">// Dot 2:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3500);  <span class="comment">// X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t+500) * 1000));<span class="comment">// Y</span>

  <span class="comment">// Dot 3:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(4000);  <span class="comment">// X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t+1000) * 1000));<span class="comment">// Y</span>

  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="comment">// X marks the spot. 2 line segments, so 4 vertices:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(4);

  <span class="comment">// Segment 1:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-4250); <span class="comment">// X1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(250);   <span class="comment">// Y1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-3750); <span class="comment">// X2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-250);  <span class="comment">// Y2</span>

  <span class="comment">// Segment 2:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-4250); <span class="comment">// X1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-250);  <span class="comment">// Y1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-3750); <span class="comment">// X2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(250);   <span class="comment">// Y2</span>
  
  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <span class="comment">// 1 Arrow that points at the robot</span>
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(1);
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(0);      <span class="comment">// Pos. X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(700);   <span class="comment">// Pos. Y</span>
  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

</pre></div> </div><!-- contents -->
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Mon Nov 10 2014 07:58:35 for ArNetworking by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
